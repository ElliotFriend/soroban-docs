{"version":3,"file":"OpenRPCDocMethod.js","sourceRoot":"","sources":["../../src/theme/OpenRPCDocMethod.tsx"],"names":[],"mappings":"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","sourcesContent":["import React from \"react\";\nconst DocSidebar = require(\"@theme/DocSidebar\").default;\nimport {\n  Sidebar,\n} from \"@docusaurus/plugin-content-docs/src/sidebars/types\";\nimport Layout from '@theme/Layout';\nconst {useDocRouteMetadata} = require('@docusaurus/theme-common/internal');\nimport {ExamplePairingObject, MethodObject, ContentDescriptorObject} from '@open-rpc/meta-schema';\nimport { InteractiveMethod, Method} from '@metamask/open-rpc-docs-react';\nimport { join } from 'path';\nimport \"./OpenRPCDocMethod.css\";\nconst CodeBlock = require('@theme/CodeBlock').default;\n\nconst getExamplesFromMethod = (method?: MethodObject): ExamplePairingObject[] => {\n  if (!method) { return []; }\n  if (!method.params) { return []; }\n  const examples: ExamplePairingObject[] = [];\n\n  (method.params as ContentDescriptorObject[]).forEach((param, index: number) => {\n    if (param.schema && param.schema.examples && param.schema.examples.length > 0) {\n      param.schema.examples.forEach((ex: any, i: number) => {\n        const example = examples[i];\n        if (example === undefined) {\n          examples.push({\n            name: \"generated-example\",\n            params: [\n              {\n                name: param.name,\n                value: ex,\n              },\n            ],\n            result: {\n              name: \"example-result\",\n              value: null,\n            },\n          });\n        } else {\n          example.params.push({\n            name: param.name,\n            value: ex,\n          });\n        }\n      });\n    }\n  });\n  const methodResult = method.result as ContentDescriptorObject;\n  if (methodResult && methodResult.schema && methodResult.schema.examples && methodResult.schema.examples.length > 0) {\n    methodResult.schema.examples.forEach((ex: any, i: number) => {\n      const example = examples[i];\n      if (example === undefined) {\n        examples.push({\n          name: \"generated-example\",\n          params: [],\n          result: {\n            name: methodResult.name,\n            value: ex,\n          },\n        });\n      } else {\n        example.result = {\n          name: methodResult.name,\n          value: ex,\n        };\n      }\n    });\n  }\n  return examples;\n};\n\nexport default function OpenRPCDocMethod(props: any) {\n  const {versionMetadata} = props;\n\n  let sidebar: Sidebar = props.propsFile.openrpcDocument.methods.map((method: MethodObject) => {\n    return {\n      type: \"link\",\n      label: method.name,\n      href: join(props.propsFile.path, method.name.toLowerCase()),\n    }\n  });\n  if (versionMetadata) {\n    sidebar = Object.values(versionMetadata.docsSidebars)[0] as Sidebar;\n  }\n\n  const method = props.propsFile.openrpcDocument.methods.find((m: MethodObject) => {\n    const parts = props.route.path.split(\"/\");\n\n    let name = parts[parts.length - 1];\n\n    // deal with trailingSlash: true\n    if (name === \"\") {\n      name = parts[parts.length - 2];\n    }\n\n    return m.name.toLowerCase() === name.toLowerCase();\n  })\n\n  method.examples = method.examples || getExamplesFromMethod(method);\n  const [selectedExamplePairing, setSelectedExamplePairing] = React.useState<ExamplePairingObject | undefined>(method.examples[0]);\n\n  return (\n    <Layout>\n      <div style={{ display: \"flex\", width: \"100%\", flex: \"1 0\",  }} className=\"docusaurus-openrpc\">\n        <aside\n          style={{\n            display: \"block\",\n            width: \"var(--doc-sidebar-width)\",\n            marginTop: \"calc(-1 * var(--ifm-navbar-height))\",\n            borderRight: \"1px solid var(--ifm-toc-border-color)\",\n            willChange: \"width\",\n            transition: \"width var(--ifm-transition-fast) ease\",\n            clipPath: \"inset(0)\",\n          }}\n          className=\"theme-doc-sidebar-container\">\n          <div style={{\n            top: 0,\n            position: \"sticky\",\n            height: \"100%\",\n            maxHeight: \"100vh\",\n          }}>\n            <DocSidebar path={props.route.path} sidebar={sidebar}/>\n          </div>\n        </aside>\n\n        <main className=\"docMainContainer\" style={{width: \"100%\"}}>\n          <div className=\"container padding-top--md padding-bottom--lg\">\n            <div className=\"row\">\n              <div className=\"col col--7\">\n                {!method &&\n                  <div>Index</div>\n                }\n                {method && <Method method={method} components={{CodeBlock}} onExamplePairingChange={(examplePairing: ExamplePairingObject | undefined) => setSelectedExamplePairing(examplePairing)}/>}\n              </div>\n\n              <div id=\"interactive-box\" className=\"col col--5 interactive-right-sidebar table-of-contents__left-border thin-scrollbar\">\n                {method && <InteractiveMethod method={method} components={{CodeBlock}} selectedExamplePairing={selectedExamplePairing as ExamplePairingObject}/>}\n              </div>\n            </div>\n          </div>\n        </main>\n      </div>\n    </Layout>\n  );\n}\n"]}